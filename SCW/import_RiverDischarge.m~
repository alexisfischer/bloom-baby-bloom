%% import discharge data
% Discharge (cubic feet per second)
% Date,  dn=datenum(TimeUTC,'yyyy-mm-dd HH:MM');

filename = '/Users/afischer/Documents/MATLAB/bloom-baby-bloom/SCW/Data/PajaroRiver_1993-2018.txt';
delimiter = {'\t',' ',':'};
startRow = 31;
formatSpec = '%*q%*q%{yyyy-MM-dd HH:mm}D%*q%f%*s%[^\n\r]';

fileID = fopen(filename,'r');
dataArray = textscan(fileID, formatSpec, 'Delimiter', delimiter, 'MultipleDelimsAsOne', true, 'TextType', 'string', 'EmptyValue', NaN, 'HeaderLines' ,startRow-1, 'ReturnOnError', false, 'EndOfLine', '\r\n');
fclose(fileID);

dt = dataArray{:, 1};
discharge = dataArray{:, 2};

[paj.dn,paj.dis,~] = ts_aggregation(datenum(dt),discharge,1,'day',@mean);


%% plot Pajaro River discharge
load PajaroRiver;

figure('Units','inches','Position',[1 1 8 2],'PaperPositionMode','auto');

plot(paj.dn,paj.dis,'b-','Linewidth',1);
datetick('x','yyyy');
%'yscale','log',
set(gca,...
    'xlim',[datenum('1995-01-01') datenum('2019-01-01')],...     
	'fontsize',10,'XAxisLocation','bottom','TickDir','out'); 
ylabel('Discharge (ft^3 sec^-^1)','fontsize',11,'fontweight','bold');        
hold on

% set figure parameters
set(gcf,'color','w');
print(gcf,'-dtiff','-r600','~/Documents/MATLAB/bloom-baby-bloom/SCW/Figs/PajaroDischarge_1995-2018.tif')
hold off 